# You can read more about the yardl syntax here: https://aka.ms/yardl/docs

PrdExperiment: !protocol
  sequence:
    header: Header
    timeBlocks: !stream
      items: TimeBlock

Header: !record
  fields:
    scanner: ScannerInformation
    exam: ExamInformation?

# All information about a coincidence event specified as identifiers or indices (i.e. discretized).
# TODO: this might take up too much space, so some/all of these could be combined in a single index if necessary.
CoincidenceEvent: !record
  fields:
    detector1Id: uint
    detector2Id: uint
    tofIdx: uint
    energy1Idx: uint
    energy2Idx: uint

TimeBlock: !record
  fields:
   # number of the block. Multiply with listmodeTimeBlockDuration to get time since startOfAcquisition
   id: uint
   # list of prompts in this time block
   # TODO might be better to use !array
   promptEvents: CoincidenceEvent*
   # list of delayed coincidences in this time block
   delayedEvents: CoincidenceEvent*?

